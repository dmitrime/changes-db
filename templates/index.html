<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="description" content="Shortly the URL shortener!">

    <title>Shortly</title>

    <link rel=stylesheet type=text/css href="{{ url_for('static', filename='css/pure.min.css') }}"/>
    <link rel=stylesheet type=text/css href="{{ url_for('static', filename='css/style.css') }}"/>
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Raleway:200"/>

    <script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>


    <script type="text/javascript" language="javascript">
       $(document).ready(function() {

          $('x').click(function(event){

              if ($('#short-url a').length == 0) {
                  $('#short-url').prepend('<a></a>'); // dummy link
              }
          });
          $("form button").click(function () {
              files = $('input[type=file]')[0].files
              if (files.length == 1 && files[0].type == "text/csv") {
                  var formData = new FormData();
                  formData.append('file', files[0]);
                  $.ajax({
                          url: '/submit',
                          data: formData,
                          type: 'POST',
                          processData: false,
                          contentType: false,
                          success: function(response) {
                              console.log(response);
                          },
                          error: function(error) {
                              console.log(error);
                          }
                  });
              }
          });
          $(document).keypress(function(e) {
              if(e.which == 13) {
                  e.preventDefault();
                  $('form button').click();
              }
          });
       });
    </script>
</head>

<body>
<div id="main">

    <div class="header">
        <h1><a href="/">State Query</a></h1>
        <h2>Upload a CSV file and query object state</h2>
                  
        <form class="pure-form" enctype="multipart/form-data">
            <fieldset>
                <div class="btn btn-primary">
                    <input name="file" type="file"/>
                    <button type="button" class="upload-button pure-button pure-button-primary">Upload</button>
                </div>
            </fieldset>
        </form>

        </div>
    </div>

</div>
</body>
</html>
